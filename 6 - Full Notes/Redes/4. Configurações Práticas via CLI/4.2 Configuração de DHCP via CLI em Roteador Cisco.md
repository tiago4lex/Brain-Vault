2025-05-30 15:15

Status: #developed #redes

Tags: [[Redes de Computadores]] | [[Cisco]] | [[DHCP]] | [[Configuração]] | [[Camada 7 - Aplicação]]

----
# O que é DHCP?

**DHCP *(Dynamic Host Configuration Protocol)*** é um protocolo que permite a configuração automática de endereços IP e outros parâmetros de rede (como gateway e DNS) para dispositivos em uma rede.

**Benefícios:**

- Reduz erros de configuração manual
- Automatiza o gerenciamento de IPs
- Útil em redes com muitos dispositivos

----
# Etapas para configurar DHCP no Roteador

## 1. Acesse o CLI do roteador

```bash
Router> enable
Router# conigure terminal
```

## 2. Configure o IP da interface conectada à LAN

**Exemplo:**

```bash
interface FastEthernet0/0
ip address 192.168.10.1 255.255.255.0
no shutdown
exit
```

## 3. Criar um escopo de DHCP

Define o intervalo de IPs que o roteador pode atribuir aos dispositivos.

```bash
ip dhcp pool REDE_LOCAL
network 192.168.10.0 255.255.255.0
default-router 192.168.10.1
dns-server 8.8.8.8
```

- `network`: rede a ser distribuída
- `default-server`: gateway padrão
- `dns-server`: servidor DNS (pode usar 8.8.8.8 - Google)

## 4. Excluir IPs que não devem ser atribuídos via DHCP

Se o IP do roteador é `192.168.10.1`, evite distribuí-lo pelo DHCP.

```bash
ip dhcp excluded-address 192.168.10.1 192.168.10.10
```

Isso reserva os IPs de `.1` a `.10` para uso manual (servidores, impressoras, etc.)

## 5. Verificar configuração do DHCP

```bash
show ip dhcp binding                  <- Mostra IPs atribuidos
show running-config | section dhcp    <- Mostra configuração DHCP
```

---
# Conexão com o PC

## 1. Conectar o PC ao roteador

Use um **cabo direto** entre a porta **Ethernet do PC** e a **interface FastEthernet0/0** do roteador.

## 2. Configurar o PC para obter IP automaticamente

### **Em Packet Tracer (modo gráfico)**

- Vá em **Desktop** > **IP Configuration**
- Marque a opção **DHCP**

O PC receberá automaticamente um IP, máscara, gateway e DNS.

## 3. Testar conectividade

### **No PC**

```bash
ping 192.168.10.1
```

### **No Roteador**

```bash
ping 192.168.10.X     <- IP atribuído ao PC
```

---
# Exemplo Completo de Script

```bash
enable
configure terminal

interface FastEthernet0/0
ip address 192.168.10.1 255.255.255.0
no shutdown
exit

ip dhcp excluded-address 192.168.10.1 192.168.10.10

ip dhcp pool REDE_LOCAL
network 192.168.10.0 255.255.255.0
default-router 192.168.10.1
dns0-server 8.8.8.8

exit
```

---
# Dicas Finais

- PCs configurados com DHCP devem estar na **mesma rede** da interface do roteador que distribui IPs
- Certifique-se de usar o comando `no shutdown` nas interfaces
- O DHCP do roteador só funciona para **dispositivos diretamente conectados** ou através de switches na mesma [[5.1 Redes Locais Virtuais (VLAN)]].