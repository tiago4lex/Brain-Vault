2025-11-13 13:55

Status: #developed #redes 

Tags: [[Redes de Computadores]] | [[Roteamento]] | [[Cisco]] | [[Protocolos]] | [[RIP]] | [[OSPF]] | [[BGP]] | [[Camada 3 - Rede]]

----
# O que √© Roteamento?

O **roteamento** √© o processo pelo qual **roteadores escolhem o melhor caminho** para enviar pacotes de dados de uma rede para outra.

Seu objetivo √© garantir que a informa√ß√£o chegue ao destino correto atrav√©s do caminho mais eficiente poss√≠vel.

Um roteador armazena essas informa√ß√µes em uma **tabela de roteamento**, que cont√©m as rotas conhecidas e as interfaces associadas de cada rede.

---
# Tipos de Roteamento

Existem dois principais tipos de roteamento:

## 1. Roteamento Est√°tico

- As rotas s√£o **configuradas manualmente pelo administrador de rede**.
- O roteador **n√£o atualiza automaticamente** quando h√° mudan√ßas na topologia.
- √â simples, seguro e previs√≠vel, por√©m pouco flex√≠vel.

### üü¢ Vantagens

- Mais controle sobre o tr√°fego.
- N√£o consome banda nem processamento com trocas de informa√ß√µes.
- Ideal para redes pequenas e rotas est√°veis.

### üî¥ Desvantagens

- Dif√≠cil de mantes em redes grandes.
- N√£o se adapta automaticamente a falhas.

## 2. Roteamento Din√¢mico

- As rotas s√£o **aprendidas automaticamente** por meio de **protocolos de roteamento**.
- O roteador se comunica com outros roteadores trocando informa√ß√µes de rotas.
- Se um caminho falhas, ele pode recalcular automaticamente uma nova rota.

### üü¢ Vantagens

- Autom√°tico e escal√°vel.
- Se adapta rapidamente a falhas e mudan√ßas.
- Ideal para redes m√©dias e grandes.

### üî¥ Desvantagens

- Maior consumo de CPU e largura de banda.
- Pode haver pequenas oscila√ß√µes (instabilidade) durante converg√™ncia.

---
# Tabela de Roteamento

A **tabela de roteamento** √© onde o roteador armazena todas as rotas conhecidas.

Para visualizar no Cisco IOS:

```bash
Router> show ip route
```

Cada linha cont√©m:

- **C√≥digo** (S, D, C, R, O, etc.): indica como a rota foi aprendida.
- **Rede de destino**.
- **M√°scara de sub-rede**.
- **Pr√≥ximo salto** *(next-hop)*.
- **Interface de sa√≠da**.

**Exemplo de Sa√≠da:**

```
C    192.168.1.0/24 is directly connected, FastEthernet0/0
S    192.168.2.0/24 [1/0] via 192.168.1.2
```

> `C` = conectado diretamente; `S` = rota est√°tica

---
# Roteamento Est√°tico - Conceito e Configura√ß√£o

## Cen√°rio de Exemplo

Duas redes locais conectadas por dois roteadores:

```scss
[PC1]---(R1)---(R2)---[PC2]
```

|Dispositivo|Interface|Endere√ßo IP|
|---|---|---|
|R1|Fa0/0|192.168.1.1|
|R1|Se0/0/0|10.0.0.1|
|R2|Se0/0/0|10.0.0.2|
|R2|Fa0/0|192.168.2.1|

**Objetivo:** Permitir que `PC1` (192.168.1.10) comunique-se com `PC2` (192.168.2.10).

## Configura√ß√£o no Cisco IOS

### Passo 1: Configurar interfaces

**No R1:**

```bash
R1(config)# interface fastEthernet0/0
R1(config-if)# ip address 192.168.1.1 255.255.255.0
R1(config-if)# no shutdown
R1(config)# interface serial0/0/0
R1(config-if)# ip address 10.0.0.1 255.255.255.252
R1(config-if)# no shutdown
```

**No R2:**

```bash
R2(config)# interface fastEthernet0/0
R2(config-if)# ip address 192.168.2.1 255.255.255.0
R2(config-if)# no shutdown
R2(config)# interface serial0/0/0
R2(config-if)# ip address 10.0.0.2 255.255.255.252
R2(config-if)# no shutdown
```

### Passo 2: Configurar rotas est√°ticas

No R1 (rota para rede 192.168.2.0):

```bash
R1(config)# ip route 192.168.2.0 255.255.255.0 10.0.0.2
```

No R2 (rota para rede 192.168.1.0):

```bash
R2(config)# ip route 192.168.1.0 255.255.255.0 10.0.0.1
```

### Passo 3: Testar conectividade

Do R1 ou PC1:

```bash
R1# ping 192.168.2.1
```

> Se o ping responder, o roteamento est√°tico est√° funcionando!

---
# Roteamento Din√¢mico - Conceito e Configura√ß√£o

O roteamento din√¢mico utiliza **protocolos** que trocam automaticamente informa√ß√µes sobre rotas.

## Tipos de Protocolos Din√¢micos

| Tipo                | Exemplo | Descri√ß√£o                                                 |
| ------------------- | ------- | --------------------------------------------------------- |
| **Distance Vector** | RIP     | Baseia-se na dist√¢ncia (saltos) at√© o destino             |
| **Link State**      | OSPF    | Conhece o estado de todos os links da rede                |
| **Path Vector**     | BGP     | Usado para roteamento entre sistemas aut√¥nomos (Internet) |

## Exemplo com RIP *(Routing Information Protocol)*

**Configura√ß√£o em R1**:

```bash
R1(config)# router rip
R1(config-router)# version 2
R1(config-router)# network 192.168.1.0
R1(config-router)# network 10.0.0.0
R1(config-router)# no auto-summary
```

**Configura√ß√£o em R2**:

```bash
R2(config)# router rip
R2(config-router)# version 2
R2(config-router)# network 192.168.2.0
R2(config-router)# network 10.0.0.0
R2(config-router)# no auto-summary
```

Com isso, cada roteador **anuncia suas redes** e **aprende automaticamente as rotas** do outro.

Verifique as rotas:

```bash
R1# show ip route
```

√â poss√≠vel ver as linhas maradas com `R` (RIP).

## Exemplo com OSPF *(Open Shorter Path First)*

**R1:**

```bash
R1(config)# router ospf 1
R1(config-router)# network 192.168.1.0 0.0.0.255 area 0
R1(config-router)# network 10.0.0.0 0.0.0.3 area 0
```

**R2:**

```bash
R2(config)# router ospf 1
R2(config-router)# network 192.168.2.0 0.0.0.255 area 0
R2(config-router)# network 10.0.0.0 0.0.0.3 area 0
```

Ap√≥s alguns segundos, os roteadores estabelecem uma **vizinha OSPF** e aprendem as rotas automaticamente.

---
# Comparativo R√°pido

|Crit√©rio|Roteamento Est√°tico|Roteamento Din√¢mico|
|---|---|---|
|Administra√ß√£o|Manual|Autom√°tica|
|Escalabilidade|Baixa|Alta|
|Adapta√ß√£o a falhas|Manual|Autom√°tica|
|Consumo de recursos|Baixo|M√©dio/Alto|
|Aplica√ß√£o t√≠pica|Pequenas redes|M√©dias e grandes redes|

---
# Comandos Importantes (Cisco IOS)

|Comando|Fun√ß√£o|
|---|---|
|`show ip route`|Mostra tabela de roteamento|
|`show running-config`|Mostra configura√ß√£o atual|
|`show ip protocols`|Exibe protocolos de roteamento ativos|
|`debug ip rip`|Mostra pacotes de atualiza√ß√£o RIP em tempo real|
|`clear ip route *`|Limpa tabela de roteamento|
|`ip route`|Cria rota est√°tica|
|`router rip / ospf / bgp`|Entra no modo de configura√ß√£o de protocolo|

---
# Boas Pr√°ticas

- Sempre **documente as rotas** configuradas manualmente.
- Evite **misturar protocolos din√¢micos sem redistribui√ß√£o** adequada.
- Use **Roteamento Est√°tico para rotas default** e **din√¢mico** para redes grandes.
- Em simula√ß√µes, **teste sempre com `ping` e `traceroute`** para confirmar o caminho.

---
# Conclus√£o

O roteamento √© o **cora√ß√£o das comunica√ß√µes entre redes**.  
Entender **a diferen√ßa entre est√°tico e din√¢mico** √© essencial para configurar redes eficientes, seguras e resilientes.

Em ambientes reais, normalmente √© usada uma **combina√ß√£o de ambos**:

- **Roteamento est√°tico** para rotas padr√£o e caminhos cr√≠ticos.
- **Roteamento din√¢mico** para o restante da rede, garantindo flexibilidade e redund√¢ncia.