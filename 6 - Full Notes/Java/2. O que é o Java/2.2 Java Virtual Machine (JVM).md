2025-09-17 00:23

Status: #developed #Java 

Tags: [[Java]]

----
# Introdução

## O que é o JVM?

O Java Virtual Machine (JVM) é o **componente responsável por executar programas Java**.

Ele atua como uma **máquina virtual que interpreta e executa o bytecode Java**, garantindo que um programa escrito em Java possa ser executado em qualquer sistema operacional que tenha uma JVM instalada.

Esse conceito é chamado de:

>[!quote] Esse conceito é chamado de:
>***"Write Once, Run Anywhere"***
>(Escreva uma vez, execute em qualquer lugar)

Ou seja, o **mesmo código Java pode ser executado em Windows, Linux, macOS**, etc.

---
# Arquitetura da Plataforma Java

A execução de um programa Java envolve três partes principais:

1. **JDK *(Java Development Kit)***
	- Conjunto de ferramentas para desenvolvimento Java (compilador `javac`, debugger, bibliotecas, etc.).

2. **JRE *(Java Runtime Envionment)***
	- Ambiente de execução que contém a JVM e as bibliotecas padrão para rodar programas Java.

3. **JVM *(Java Virtual Machine)***
	- Componente da JRE que **executa** o código compilado em bytecode.

Fluxo resumido:

![[Pasted image 20250917002946.png]]

---
# O que é o arquivo `.class`?

Quando escrevemos o código em um arquivo `.java` e compilamos com o comando:

```bash
javac MeuPrograma.java
```

O compilador `javac` traduz o código-fonte Java em um **arquivo de bytecode** com extensão `.class`:

- `MeuPrograma.class`

Esse **bytecode** é um conjunto de instruções de nível intermediário, **independente de sistema operacional ou hardware**, que será interpretado ou compilado pela JVM.

---
# Como a JVM funciona?

A JVM é composta por vários componentes internos que trabalham em conjunto para executar o bytecode.

Fluxo detalhado:

### 1. *Class Loader* (Carregador de Classes)

- Responsável por **carregar os arquivos `.class` na memória**.
- Faz parte do processo de inicialização do programa.
- Pode carregar classes da aplicação, da biblioteca padrão do Java ou de bibliotecas externas.

### 2. Verificador de Bytecode (Bytecode Verifier)

- Verifica se o bytecode está **correto e seguro** antes de ser executado.
- Impede que bytecodes maliciosos causem danos ao sistema.
- Exemplo: garante que não haja acesso ilegal à memória.

### 3. Área de Memória da JVM (Runtime Data Areas)

A JVM organiza a memória em diferentes áreas durante a execução:

- **Heap**: onde ficam os objetos criados dinamicamente.
- **Stack (Pilha de execução)**: onde são armazenados os frames de métodos (variáveis locais, dados temporários, etc.).
- **Method Area**: guarda informações sobre classes carregadas (métodos, nomes, campos).
- **Program Counter (PC Register)**: registra a posição atual de execução do bytecode.
- **Native Method Stack**: usada para chamadas de métodos escritos em outras linguagens (como C/C++).

### 4. Interpretador e JIT Compiler

- O **Interpretador** lê o bytecode e o executa instrução por instrução.
- O **JIT Compiler (Just-In-Time Compiler)** converte partes do bytecode para **código nativo da máquina** durante a execução, para melhorar o desempenho.

Esse processo híbrido garante **portabilidade (via bytecode)** e **alto desempenho (via JIT)**.

### 5. Garbage Collector (Coletor de Lixo)

- Gerencia automaticamente a memória, **removendo objetos que não estão mais em uso**.
- Isso evita vazamentos de memória e simplifica a programação em Java.

---
# Vantagens da JVM

- **Portabilidade:** roda o mesmo programa em qualquer sistema com JVM.
- **Segurança:** impede acesso direto à memória e executa bytecode verificado.
- **Gerenciamento automático de memória** (garbage collection).
- **Otimizações de desempenho** com compilação JIT.
- **Multithreading nativo** e suporte a execução concorrente.

---
# Resumo do Ciclo de Execução

- Escreve-se o código no arquivo `Programa.java`.
- Compila com `javac Programa.java`.
- É gerado o arquivo `Programa.class` com bytecode.
- A JVM carrega o `.class`, verifica, interpreta (e/ou compila JIT) e executa o código.
- O programa roda no sistema operacional hospedeiro.

---
# Diagrama Resumido

```pgsql
+-------------------+         +-----------------+         +-------------+
| Código Fonte (.java) | --> | Compilador javac | --> | Bytecode (.class) |
+-------------------+         +-----------------+         +-------------+
                                                          |
                                                          v
                                                 +-------------------+
                                                 |      JVM           |
                                                 | - Class Loader     |
                                                 | - Bytecode Verifier|
                                                 | - Interpreter/JIT  |
                                                 | - Garbage Collector|
                                                 +-------------------+
                                                          |
                                                          v
                                                 +-------------------+
                                                 |  Sistema Operacional|
                                                 +-------------------+

```