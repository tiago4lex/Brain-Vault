2025-10-20 11:52

Status: #developed #Java 

Tags: [[Java]]

----
# Tratamento de Exceções

## O que são Exceções?

**Exceções** são  **erros que ocorrem em tempo de execução** (durante a execução do programa);

O tratamento de exceções **impede que o programa quebre** e permite **lidar com o erro de forma controlada**.

## Blocos principais

- `try` → onde o código “perigoso” é executado.
- `catch` → captura e trata o erro.
- `finally` → executa um bloco de código mesmo que ocorra erro (opcional).
- `throw` → lança uma exceção manualmente.
- `throws` → declara que um método pode lançar exceções.

## Exemplo

```java
public class ExemploExcecao {
    public static void main(String[] args) {
        try {
            int[] numeros = {1, 2, 3};
            System.out.println(numeros[5]); // erro: índice inválido
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("Erro: índice fora dos limites do array!");
        } finally {
            System.out.println("Bloco 'finally' executado!");
        }
    }
}
```

**Saída:**

```text
Erro: índice fora dos limites do array!
Bloco 'finally' executado!
```

**Explicação**

1. O Java entra no bloco `try`:
	- O que está dentro do `try` é considerado **"código que pode causar erro."**

2. Executa a linha:

```java
int[] numeros = {1, 2, 3};
```

O array `numeros` é criado com 3 posições (`índices: 0, 1, 2`).

3. Executa a próxima linha:

```java
System.out.println(numeros[5]);
```

Aqui ocorre o **erro**: você tenta acessar o índice **5**, que **não existe** no array.

4. O Java lança uma execução automaticamente

```java
java.lang.ArrayIndexOutOfBoundsException
```

Isso significa que o **programa não pode continuar normalmente**.

O Java interrompe o fluxo e procura um bloco `catch` **compatível com o tipo da exceção**.

5. O `catch` **correspondente é encontrado**:

```java
catch (ArrayIndexOutOfBoundsException e) {
    System.out.println("Erro: índice fora dos limites do array!");
}
```

Esse bloco é executa, **tratando o erro**.

6. Depois do `catch`, o bloco `finally` é executado:

```java
System.out.println("Bloco 'finally' executado!");
```

Esse bloco **sempre é executado**, mesmo se não houver erro.

## Exemplo de exceção personalizada

```java
class SaldoInsuficienteException extends Exception {
    SaldoInsuficienteException(String mensagem) {
        super(mensagem);
    }
}

class Conta {
    double saldo = 1000;

    void sacar(double valor) throws SaldoInsuficienteException {
        if (valor > saldo) {
            throw new SaldoInsuficienteException("Saldo insuficiente para saque!");
        }
        saldo -= valor;
        System.out.println("Saque realizado. Saldo restante: " + saldo);
    }
}

public class Main {
    public static void main(String[] args) {
        Conta conta = new Conta();
        try {
            conta.sacar(1500);
        } catch (SaldoInsuficienteException e) {
            System.out.println("Erro: " + e.getMessage());
        }
    }
}
```

**Saída:**

```text
Erro: Saldo insuficiente para saque!
```
