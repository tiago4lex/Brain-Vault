2025-09-19 09:40

Status: #developed #Java 

Tags: [[Java]]

----
# Introdução

## O que são Text Blocks

**Text Blocks** foram introduzidos no Java 15 (como recurso estável) para facilitar a escrita de **strings multilinha** no código-fonte.

Antes, para escrever texto em várias linhas, era preciso usar várias concatenações e `\n`, por exemplo:

```java
String texto =  "Linha 1\n" +
				"Linha 2\n" +
				"Linha 3\n";
```

Com **Text Blocks**, basta usar três aspas duplas (`"""`):

```java
String texto = """
	Linha 1
	Linha 2
	Linha 3
	""";
```

---
# Características dos Text Blocks

- São iniciados e finalizados com `"""`.
- Podem conter múltiplas linhas de texto.
- Preservam quebras de linha.
- Removem automaticamente indentação comum (margem em branco à esquerda).
- São do tipo `String` com qualquer literal de string.

---
# Exemplo prático de uso

```java
public class ExemploTextBlock {
	public static void main(String[] args) {
		String html = """
			<html>
				<body>
					<h1>Hello world!</h1>
				</body>
			</html>
		""";
		
		System.out.println(html);
	}
}
```

**Saída:**

```html
<html>
    <body>
        <h1>Olá, mundo!</h1>
    </body>
</html>
```

---
# Text Blocks com caracteres especiais e formatação

É possível usar **caracteres de escape** como `\n`, `\t`, `\"` e outros normalmente dentro do text block.

```java
String json = """
	{
		"nome": "Ana",
		"idade": 25
	}
	""";
```

Também é possível colocar **placeholders** (`%s`, `%d`, etc.) e usar o método `formatted()` para substituir valores.

---
# Método `formatted()`

O método `formatted()` é um atalho mais moderno e legível para substituir valores dentro de um texto, semelhante a `string.format()`.

Ele retorna uma **nova string formatada** usando os argumentos fornecidos.

## Sintaxe básica

```java
String texto = "Olá, %s!".formatted("Maria");
System.out.println(texto); // Olá, Maria!
```

- `%s` → Substitui por `String`
- `%d` → Substitui por `int`
- `%f` → Substitui por `float` / `double`
- `%n` → quebra de linha do sistema

---
# Exemplo prático com Text Blocks e `formatted()`

```java
public class ExemploFormatted {
	public static void main(String[] args) {
		String nome = "Maria";
		int idade = 30;
		
		String mensagem = """
			Nome: %s
			Idade %d anos
			""".formatted(nome, idade);
		
		System.out.println(mensagem);
	}
}
```

**Saída:**

```
Nome: Maria
Idade: 30 anos
```

---
# Comparação com `String.format()`

As duas formas produzem o mesmo resultado:

```java
String msg1 = "Olá, $s".formatted("João");
String msg2 = String.format("Olá, %s", "João");
```

- `formatted()` é mais **enxuto** e pode ser chamado diretamente em Text Blocks.
- `String.format()` é estático e pode ser usado em versões anteriores ao Java 15 (que não têm text blocks).

---
# Dicas e boas práticas

- Use `formatted()` para manter seu text block limpo, evitando concatenação.
- Utilize `"""` alinhado na coluna onde o texto começa para evitar indentação indesejada.
- Se precisar de uma **aspa tripla dentro** do texto, quebre a sequência (`""\"` por exemplo).

---
# Exemplo avançado - SQL com parâmetros

```java
String tabela = "usuarios";
String sql = """
	SELECT id, nome, email
	FROM %s
	WHERE ativo = 1
	ORDER BY nome
	""".formatted(tabela);
	
System.out.println(sql);
```

**Saída:**

```sql
SELECT id, nome, email
FROM usuarios
WHERE ativo = 1
ORDER BY nome
```

---
# Resumo

| Recurso                | Finalidade                             | Introduzido em |
| ---------------------- | -------------------------------------- | -------------- |
| **Text Block** (`"""`) | Criar strings multilinha legíveis      |                |
| **`formatted()`**      | Substituir valores em placeholders `%` |                |