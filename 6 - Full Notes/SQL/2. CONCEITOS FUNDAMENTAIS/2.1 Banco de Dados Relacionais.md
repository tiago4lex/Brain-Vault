2025-10-21 21:36

Status: #developed #SQL 

Tags: [[4 - Indexes/SQL|SQL]]

----
# Introdução

Um **Banco de Dados Relacional (BDR)** é um tipo de banco de dados que **organiza as informações em tabelas** - formadas por **linhas (registros)**  e com **colunas (atributos)** - e estabelece **relações entre elas por meio de chaves**.

Criado por **Edgar F. Codd** na década de 1970, esse modelo revolucionou a forma de armazenar e manipular dados, sendo usado até hoje em sistemas como MySQL, PostgreSQL, Oracle, SQL Server, entre outros.

![[Pasted image 20251021213828.png]]

---
# O que é um Banco de Dados Relacional?

Em um Banco de Dados Relacional, os dados são apresentados em **tabelas que se relacionam entre si**.

Cada tabela representa uma **entidade** (por exemplo: clientes, produtos, vendas) e cada linha representa um **registro individual** dessa identidade.

Essas tabelas são conectadas por meio de **chaves primárias e estrangeiras**, formando uma **rede lógica de relacionamentos**.

---
# Estrutura básica de um banco relacional

### Tabela

Conjunto de dados organizados em **linhas e colunas**.

| id_cliente | nome  | cidade    |
| ---------- | ----- | --------- |
| 1          | Maria | São Paulo |
| 2          | Ana   | Curitiba  |

### Linha (Registro)

Cada linha representa um **objeto real** - neste exemplo, um cliente específico.

### Coluna (Atributo)

Cada coluna representa uma **característica ou propriedade** da entidade.
Ex.: nome, cidade, e-mail, etc.

---
# Chaves e Relacionamentos

Os relacionamentos são o coração do modelo relacional.
Eles definem como as tabelas estão **ligadas entre si**.

## Chave Primária *(PRIMARY KEY)*

É o **identificador único** de cada registro dentro de uma tabela.
Nenhum valor pode se repetir e nem ser nulo.

```sql
CREATE TABLE Cliente (
	idCliente int primary key auto_increment;
	nome varchar(50),
	cidade varchar(50)
);
```

**Exemplo:**

Cada cliente tem um `idCliente` único - 1, 2, 3, etc.

## Chave Estrangeira *(FOREIGN KEY)*

É uma coluna em uma tabela que **faz referência à chave primária** de outra tabela, criando uma **relação entre elas**.

```sql
CREATE TABLE Pedido (
	idPedido int primary key auto_increment,
	data date,
	valor decimal(10, 2),
	idCliente int,
	foreign key (idCliente) references Cliente(idCliente)
);
```

**Exemplo:**

Cada pedido pertence a um cliente existente na tabela `Cliente`.

---
# Tipos de Relacionamentos

Existem três tipos principais de Relacionamentos entre tabelas:

| Tipo                         | Descrição                                                               | Exemplo                                                                            |
| ---------------------------- | ----------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| **1:1 (um para um)**         | Um registro de uma tabela se relaciona com apenas um registro de outra. | Cada pessoa possui apenas um CPF.                                                  |
| **1:N (um para muitos)**     | Um registro de uma tabela se relaciona com vários registros de outra.   | Um cliente pode ter vários pedidos.                                                |
| **N:N (muitos para muitos)** | Vários registros de uma tabela se relacionam com vários de outra.       | Um aluno pode cursar várias disciplinas, e cada disciplina pode ter vários alunos. |

## Exemplo 1 - Relacionamento 1:N

```sql
CREATE TABLE Cliente (
    idCliente int primary key auto_increment,
    nome varchar(50)
);

 CREATE TABLE Pedido (
    idPedido int primary key auto_increment,
    data date,
    valor decimal(10,2),
    idCliente int,
    foreign key (idCliente) references Cliente(idCliente)
);
```

**Explicação:**

- Cada cliente pode ter **vários pedidos**, mas cada pedido pertence a **um único cliente**.

## Exemplo 2 - Relacionamento N:LiAArrowDown:

Para representar um relacionamento **N:N**, usamos uma **tabela intermediária**.

```sql
CREATE TABLE Aluno (
    idAluno int primary key auto_increment,
    nome varchar(50)
);

CREATE TABLE Curso (
    idCurso int primary key auto_increment,
    nome varchar(50)
);

CREATE TABLE AlunoCurso (
    idAluno int,
    idCurso int,
    foreign key (idAluno) references Aluno(idAluno),
    foreign key (idCurso) references Curso(idCurso),
    primary key (idAluno, idCurso)
);
```

**Explicação:**

- Um aluno pode estar matriculado em vários cursos.
- Um curso pode ter vários alunos.  
    A tabela `AlunoCurso` faz a ligação entre eles.

---
# Operações Básicas em Bancos Relacionais (SQL)

A linguagem usada para manipular dados em bancos relacionais é o **SQL *(Structured Query Language)***.

Ela possui comandos classificados em grupos:

|Tipo|Sigla|Função|
|---|---|---|
|DDL|Data Definition Language|Define estruturas (CREATE, DROP, ALTER)|
|DML|Data Manipulation Language|Manipula dados (INSERT, UPDATE, DELETE)|
|DQL|Data Query Language|Consulta dados (SELECT)|
|TCL|Transaction Control Language|Controla transações (COMMIT, ROLLBACK)|
|DCL|Data Control Language|Gerencia permissões (GRANT, REVOKE)|

### Exemplo DDL

```sql
CREATE TABLE Produto (
    idProduto int primary key auto_increment,
    nome varchar(50),
    preco decimal(10,2)
);
```

### Exemplo DML

```sql
INSERT INTO Produto (nome, preco) VALUES ('Mouse', 45.90);
UPDATE Produto SET preco = 49.90 WHERE idProduto = 1;
```

### Exemplo DQL

```sql
SELECT nome, preco FROM Produto WHERE preco > 40;
```

### Exemplo TCL

```sql
START TRANSACTIOM;
UPDATE Produto SET preco = preco * 1.1;
ROLLBACK; -- desfaz a alteração
```

---
# Normalização

A **normalização** é o processo de **organizar os dados** para evitar redundância e inconsistência.  
Ela é feita em **formas normais (1FN, 2FN, 3FN, 4FN, 5FN)**, cada uma eliminando um tipo de problema.

|Forma Normal|Objetivo|
|---|---|
|**1FN**|Eliminar valores repetidos e criar chaves primárias|
|**2FN**|Remover dependências parciais|
|**3FN**|Remover dependências transitivas|
|**4FN e 5FN**|Lidar com dependências multivaloradas e junções complexas|

**Exemplo:**

Se uma tabela armazena várias informações repetidas de endereço, o ideal é **separar em outra tabela** (`Endereco`) e criar uma chave estrangeira.

---
# Vantagens dos Bancos de Dados Relacionais

✅ **Integridade referencial** — garante que os dados entre tabelas estejam coerentes.  
✅ **Facilidade de consulta** — com o SQL, é possível buscar e combinar dados de várias tabelas.  
✅ **Flexibilidade** — fácil atualização e modificação de dados.  
✅ **Segurança** — controle de permissões e transações.  
✅ **Escalabilidade lógica** — crescimento do sistema sem bagunçar a estrutura dos dados.

---
# Exemplo Completo (mini banco de dados relacional)

```sql
CREATE DATABASE loja;
USE loja;

CREATE TABLE Cliente (
    idCliente int primary key auto_increment,
    nome varchar(50),
    email varchar(100)
);

CREATE TABLE Produto (
    idProduto int primary key auto_increment,
    nome varchar(50),
    preco decimal(10,2)
);

CREATE TABLE Pedido (
    idPedido int primary key auto_increment,
    data date,
    idCliente int,
    foreign key (idCliente) references Cliente(idCliente)
);

CREATE TABLE ItemPedido (
    idPedido int,
    idProduto int,
    quantidade int,
    foreign key (idPedido) references Pedido(idPedido),
    foreign key (idProduto) references Produto(idProduto),
    primary key (idPedido, idProduto)
);
```

**Explicação:**

- `Cliente` → quem compra.
- `Produto` → o que é vendido.
- `Pedido` → o ato da compra.
- `ItemPedido` → o detalhamento dos produtos comprados.

Essas tabelas se relacionam **entre si** de maneira lógica e segura, formando um **modelo relacional completo**.

---
# Conclusão

Um **Banco de Dados Relacional** é um dos pilares mais sólidos da área de tecnologia.  
Ele permite armazenar, organizar e relacionar informações de forma estruturada, garantindo **consistência, eficiência e integridade**.

Com o domínio de conceitos como **chaves**, **relacionamentos**, **normalização** e **SQL**, você adquire a base necessária para criar sistemas confiáveis e escaláveis.