2025-09-15 08:41

Status: #developed #javascript 

Tags: [[JavaScript]]

----
# Introdução

## O que é o `reduce()`?

O método `reduce()` é uma função de ordem superior que permite **reduzir (agragar) todos os elementos de um array a um único valor**.

Ele percorre cada item do array, aplicando uma função acumuladora que combina o valor atual com o acumulador, produzindo um resultado final.

Em resumo:

> `reduce()` transforma um array de vários elementos em **um único valor** (número, string, objetos, etc.).

---
# Sintaxe

```js
array.reduce(function(acumulador, elementoAtual, indice, arrayOriginal) {
	// retorna o novo valor do acumulador
}, valorInicial);
```

### Parâmetros da função callback

- `acumulador` → valor acumulado retornado a cada iteração.
- `elementoAtual` → elemento atual do array sendo processado.
- `indice` *(opcional)* → índice do elemento atual.
- `arrayOriginal` *(opcional)* → referência ao array que está sendo percorrido.

### Parâmetro opcional

- `valorInicial` → valor  inicial do acumulador (cano são seja passado, o pirmeito elemento do array será usado como valor inicial).

### Retorno

- Um **único valor** (número, objeto, string, array, etc.) resultante da redução.

---
# Como Funciona Passo a Passo

1. O `reduce()` percorre cada elemento do array.
2. Em cada passo, ele chama a função callback com o `acumulador` e o `elementoAtual`.
3. O retorno da callback se torna o novo `acumulador`.
4. No final, o `reduce()` retorna o valor final do `acumulador`.

---
# Exemplo Simples: Soma de Números

```js
const numeros = [1, 2, 3, 4, 5];

const soma = numeros.reduce((acumulador, numero) => acumulador + numero, 0);

console.log(soma); // 15
```

### Explicação

- Começa com `acumulador = 0`
- Iterações:
	- 0 + 1 = 1
	- 1 + 2 = 3
	- 3 + 3 = 6
	- 6 + 4 = 10
	- 10 + 5 = 15

---
# Exemplo: Encontrar o Maior Número

```js
const numeros = [3, 10, 7, 15, 2];

const maior = numeros.reduce((max, atual) => atual > max ? atual : max);

console.log(maior); // 15
```
### Explicação

- `reduce()` percorre cada número do array e mantém um **acumulador**, chamado de `max`, que guarda o maior valor encontrado até o momento.
- A cada elemento (`atual`) o código faz a comparação:

```js
atual > max ? atual : max
```

Esse é um operador ternário que significa:

- Se `atual` for **maior que** `max`, retorna `atual`
- Caso contrário, retorna `max`

Ou seja, o `reduce()` vai substituindo max sempre que encontrar um número maior.

- Como **nenhum valor inicial foi fornecido** ao `reduce()`, o primeiro elemento do array (`3`) é usado como valor inicial de `max`.
- A partir do segundo elemento (`10`), as comparações começam

Iterações reais

| Iteração | max (acumulador) | atual | Comparação        | Resultado |
| -------- | ---------------- | ----- | ----------------- | --------- |
| Inicial  | 3                | —     | —                 | —         |
| 1        | 3                | 10    | 10 > 3 ? 10 : 3   | 10        |
| 2        | 10               | 7     | 7 > 10 ? 7 : 10   | 10        |
| 3        | 10               | 15    | 15 > 10 ? 15 : 10 | 15        |
| 4        | 15               | 2     | 2 > 15 ? 2 : 15   | 15        |

Resultado final: 15

---
# Exemplo: Agrupar Objetos por Prioridade

```js
const alunos = [
	{ nome: "Ana", turma: "A" },
	{ nome: "João", turma: "B" },
	{ nome: "Maria", turma: "A" },
	{ nome: "Pedro", turma: "B" }
];

const agrupados = alunos.reduce((resultado, aluno) => {
	if (!resultado[aluno.turma]) {
		resultado[aluno.turma] = []
	}
	resultado[aluno.turma].push(aluno.nome);
	return resultado;
}, {});

console.log(agrupado);
// Saída:
// {
//   A: ["Ana", "Maria"],
//   B: ["João", "Pedro"]
// }
```

## Explicação

- `resultado`: é o **acumulador** (um objeto que será preenchido com os grupos).
- `aluno`: é o **elemento atual** do array `alunos`.
- `{}`: é o **valor inicial** do acumulador - um objeto vazio onde os grupos serão criados.

### Passo a passo das iterações

| Iteração | aluno atual               | resultado antes                   | resultado depois                          |
| -------- | ------------------------- | --------------------------------- | ----------------------------------------- |
| 1        | {nome:"Ana", turma:"A"}   | {}                                | { A: ["Ana"] }                            |
| 2        | {nome:"João", turma:"B"}  | { A:["Ana"] }                     | { A:["Ana"], B:["João"] }                 |
| 3        | {nome:"Maria", turma:"A"} | { A:["Ana"], B:["João"] }         | { A:["Ana","Maria"], B:["João"] }         |
| 4        | {nome:"Pedro", turma:"B"} | { A:["Ana","Maria"], B:["João"] } | { A:["Ana","Maria"], B:["João","Pedro"] } |

### Papel do `if (!resultado[aluno.turma])`

```js
if (!resultado[aluno.turma]) {
	resultado[aluno.turma] = [];
}
```

- Verifica se **já existe um array para aquela turma**.
- Se não existir, cria um array vazio (`[]`)

Depois, faz:

```js
resultado[aluno.turma].push(aluno.nome);
```

- Adiciona o nome do aluno no array da turma correspondente.

---
# Pontos Importantes

- `reduce()` **não modifica o array original**.
- Pode **transformar um array em qualquer tipo de dado**, como número, string, objeto ou outro array.
- É muito poderoso, mas também pode deixar o código menos legível se usado de forma complexa — use com clareza.
- O uso de `valorInicial` é recomendado, principalmente com arrays vazios (evita erros).

---
# Quando Usar

Use o `reduce()` quando precisar **combinar todos os elementos de um array em um único resultado**, como por exemplo:

- Somar números
- Multiplicar valores
- Concatenar strings
- Contar elementos por categoria
- Agrupar dados em objeto